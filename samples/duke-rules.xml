<?xml version="1.0"?>
<monitoringRules>
  <monitoringRule id="avgRespTime" label="avgRespTime" timeWindow="30" timeStep="30">
    <collectedMetric metricName="ResponseTime">
      <parameter name="samplingProbability">1</parameter>
    </collectedMetric>
    <monitoredTargets>
      <monitoredTarget class="Method"/>
    </monitoredTargets>
    <metricAggregation aggregateFunction="Average" groupingClass="Method"/>
    <condition> METRIC &lt; 2 </condition>
    <actions>
      <action name="OutputMetric">
        <parameter name="metric">AverageResponseTime</parameter>
        <parameter name="value">METRIC</parameter>
        <parameter name="resourceId">ID</parameter>
      </action>
    </actions>
  </monitoringRule>
  <monitoringRule id="availabilityRule" label="availabilityRule" timeWindow="30" timeStep="30">
    <collectedMetric metricName="AppAvailable">
      <parameter name="samplingTime">60</parameter>
      <parameter name="retryPeriod">5</parameter>
      <parameter name="retryTimes">0</parameter>
      <parameter name="port">8080</parameter>
      <parameter name="path">/index.html</parameter>
    </collectedMetric>
    <monitoredTargets>
      <monitoredTarget class="InternalComponent" type="dukes-webapp"/>
    </monitoredTargets>
    <condition> METRIC &gt; 0.99 </condition>
    <actions>
      <action name="OutputMetric">
        <parameter name="metric">AverageAppAvailability</parameter>
        <parameter name="value">METRIC</parameter>
        <parameter name="resourceId">ID</parameter>
      </action>
    </actions>
  </monitoringRule>
</monitoringRules>
